<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üåç Pollution Alert Tool</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            background: linear-gradient(135deg, #6dd5ed, #2193b0);
            margin: 0;
            padding: 0;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            transition: background 0.5s ease;
            overflow: hidden;
        }
        
        /* Twinkling stars visible both day and night */
        .star {
            position: absolute;
            background-color: white;
            border-radius: 50%;
            opacity: 0;
            animation: twinkle 3s infinite ease-in-out;
        }
        
        /* Keyframes for twinkling stars */
        @keyframes twinkle {
            0% {
                opacity: 0;
            }
        
            50% {
                opacity: 1;
            }
        
            100% {
                opacity: 0;
            }
        }
        
        /* Star positions */
        .star1 {
            top: 10%;
            left: 20%;
            width: 3px;
            height: 3px;
            animation-duration: 2s;
        }
        
        .star2 {
            top: 25%;
            left: 50%;
            width: 4px;
            height: 4px;
            animation-duration: 4s;
        }
        
        .star3 {
            top: 60%;
            left: 80%;
            width: 3px;
            height: 3px;
            animation-duration: 3s;
        }
        
        .star4 {
            top: 15%;
            left: 70%;
            width: 4px;
            height: 4px;
            animation-duration: 5s;
        }
        
        .star5 {
            top: 50%;
            left: 30%;
            width: 3px;
            height: 3px;
            animation-duration: 6s;
        }
        
        /* Realistic clouds with gradient and layers */
        .cloud {
            position: absolute;
            background: linear-gradient(white, rgba(255, 255, 255, 0));
            border-radius: 50%;
            opacity: 0.8;
            animation: float 60s linear infinite;
        }
        
        .cloud1 {
            top: 5%;
            /* Adjusted for more space */
            left: -300px;
            width: 250px;
            height: 120px;
            animation-duration: 40s;
        }
        
        .cloud2 {
            top: 40%;
            /* Adjusted for more space */
            right: -500px;
            width: 350px;
            height: 160px;
            animation-duration: 50s;
        }
        
        .cloud3 {
            bottom: 15%;
            left: -400px;
            width: 300px;
            height: 140px;
            animation-duration: 60s;
        }
        
        /* Additional clouds */
        .cloud4 {
            top: 30%;
            left: -200px;
            width: 280px;
            height: 130px;
            animation-duration: 45s;
        }
        
        .cloud5 {
            top: 40%;
            right: -300px;
            width: 320px;
            height: 150px;
            animation-duration: 55s;
        }
        
        @keyframes float {
            from {
                transform: translateX(0);
            }
        
            to {
                transform: translateX(120vw);
            }
        }
        
        .container {
            max-width: 500px;
            padding: 30px;
            background-color: rgba(255, 255, 255, 0.9);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            text-align: center;
            z-index: 10;
            position: relative;
        }
        
        h1 {
            font-size: 28px;
            color: #333;
        }
        
        label {
            display: block;
            margin-bottom: 10px;
            font-size: 18px;
            color: #16A085;
        }
        
        input,
        select,
        button {
            width: 100%;
            padding: 10px;
            font-size: 16px;
            border-radius: 5px;
            border: 1px solid #ccc;
            margin-bottom: 10px;
        }
        
        button {
            background-color: #28a745;
            color: #fff;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        
        button:hover {
            background-color: #218838;
        }
        
        footer {
            text-align: center;
            padding: 20px;
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            width: 100%;
            position: absolute;
            bottom: 0;
        }
        
        .footer-links a {
            color: #fff;
            text-decoration: none;
            margin: 0 10px;
        }
        
        .footer-links a:hover {
            text-decoration: underline;
        }
        
        .alert,
        .pollution-info {
            margin-top: 20px;
            font-size: 18px;
        }
        
        .alert {
            color: #d9534f;
        }
        
        .hidden {
            display: none;
        }
        
        .dark-mode {
            background: linear-gradient(135deg, #232526, #414345);
        }
        
        .dark-mode-toggle {
            position: absolute;
            top: 20px;
            right: 20px;
            background-color: #444;
            color: #fff;
            padding: 10px;
            cursor: pointer;
            border-radius: 50%;
        }
    </style>
</head>

<body>
    <!-- Dark mode toggle button -->
    <div class="dark-mode-toggle" id="toggle-dark-mode">üåô</div>

    <!-- Floating animated clouds -->
    <div class="cloud cloud1"></div>
    <div class="cloud cloud2"></div>
    <div class="cloud cloud3"></div>
    <div class="cloud cloud4"></div>
    <div class="cloud cloud5"></div>

    <!-- Twinkling stars visible day and night -->
    <div class="star star1"></div>
    <div class="star star2"></div>
    <div class="star star3"></div>
    <div class="star star4"></div>
    <div class="star star5"></div>

    <div class="container">
        <h1>üåç Pollution Alert Tool</h1>
        <p>Stay updated on the Air, water, and noise pollution in your area.</p>

        <div class="input-group">
            <label for="location">üîç Enter Location:</label>
            <input type="text" id="location" placeholder="Type your city or region" required>
        </div>

        <div class="input-group">
            <label for="pollution-type">üå´ Select Pollution Type:</label>
            <select id="pollution-type">
                <option value="air">Air Pollution</option>
                <option value="water">Water Pollution</option>
                <option value="noise">Noise Pollution</option>
            </select>
        </div>

        <button id="check-pollution">üîî Check Pollution</button>

        <div id="alert-message" class="alert hidden"></div>
        <div id="pollution-info" class="pollution-info hidden"></div>
    </div>

    <footer>
        <div>üå± Join us in the fight against pollution!</div>
        <div class="footer-links">
            <a href="https://www.facebook.com/profile.php?id=61566966490422" target="0">Facebook</a> |
            <a href="https://x.com/Yadav25911" target="0">Twitter</a> |
            <a href="https://www.instagram.com/hanuman_yadav9793/" target="0">Instagram</a>
        </div>
        <script>
            const toggleButton = document.getElementById('toggle-dark-mode');
        const stars = document.querySelectorAll('.star');

        toggleButton.addEventListener('click', () => {
            document.body.classList.toggle('dark-mode');
        });
        const pollutionButton = document.getElementById('check-pollution');
        const alertMessage = document.getElementById('alert-message');
        const pollutionInfo = document.getElementById('pollution-info');
        const locationInput = document.getElementById('location');
        const pollutionType = document.getElementById('pollution-type');

        const apiKey = '5461ad4247ec661f4a868f6b8bf4c74a'; // Your OpenWeatherMap API key

        // Fetch Air Pollution Data
        async function fetchAirPollutionData(lat, lon) {
            const url = `https://api.openweathermap.org/data/2.5/air_pollution?lat=${lat}&lon=${lon}&appid=${apiKey}`;
            const response = await fetch(url);
            const data = await response.json();
            return data;
        }

        // Fetch Water Pollution Data from WQP
        async function fetchWaterPollutionData(location) {
            const wqpUrl = `https://www.waterqualitydata.us/Result/search?siteid=${location}&format=json`;
            const response = await fetch(wqpUrl);
            const data = await response.json();

            if (data.length > 0) {
                const waterQuality = data[0];
                return {
                    message: `Water Quality: ${waterQuality.resultDetectionCondition} - ${waterQuality.resultValue} ${waterQuality.units}`,
                };
            } else {
                return {
                    message: "No water pollution data available for this location.",
                };
            }
        }

        // Fetch Noise Pollution Data using OpenStreetMap
        async function fetchNoisePollutionData(lat, lon) {
            // Replace with a valid OpenStreetMap API for noise pollution if available
            const noiseUrl = `https://api.openstreetmap.org/api/0.6/element?lat=${lat}&lon=${lon}`;
            const response = await fetch(noiseUrl);
            const data = await response.json();
            // Parse data as per OpenStreetMap's noise pollution response (if available)
            return {
                message: "Noise pollution data is not yet implemented.",
            };
        }

        // Fetch coordinates from city name
        async function fetchCoordinates(city) {
            const geoUrl = `https://api.openweathermap.org/geo/1.0/direct?q=${city}&limit=1&appid=${apiKey}`;
            const response = await fetch(geoUrl);
            const data = await response.json();
            if (data.length === 0) {
                alertMessage.innerText = "Location not found.";
                alertMessage.classList.remove('hidden');
                return null;
            }
            return {
                lat: data[0].lat,
                lon: data[0].lon,
            };
        }

        // Handle Pollution Data Fetching
        pollutionButton.addEventListener('click', async () => {
            alertMessage.classList.add('hidden');
            pollutionInfo.classList.add('hidden');

            const location = locationInput.value;
            const selectedPollution = pollutionType.value;

            if (!location) {
                alertMessage.innerText = "Please enter a valid location.";
                alertMessage.classList.remove('hidden');
                return;
            }

            const coordinates = await fetchCoordinates(location);
            if (!coordinates) return;

            if (selectedPollution === 'air') {
                // Fetch air pollution data
                const pollutionData = await fetchAirPollutionData(coordinates.lat, coordinates.lon);
                const airQualityIndex = pollutionData.list[0].main.aqi;
                const airQualityMessage = `Air Pollution Level: ${airQualityIndex} (1 is good, 5 is hazardous)`;

                pollutionInfo.innerText = airQualityMessage;
                pollutionInfo.classList.remove('hidden');
            } else if (selectedPollution === 'water') {
                // Fetch water pollution data
                const waterPollutionData = await fetchWaterPollutionData(location);
                pollutionInfo.innerText = waterPollutionData.message;
                pollutionInfo.classList.remove('hidden');
            } else if (selectedPollution === 'noise') {
                // Fetch noise pollution data
                const noisePollutionData = await fetchNoisePollutionData(coordinates.lat, coordinates.lon);
                pollutionInfo.innerText = noisePollutionData.message;
                pollutionInfo.classList.remove('hidden');
            }
        });
        </script>
    </footer>
</body>

</html>